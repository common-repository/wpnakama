"use strict";(globalThis.webpackChunkwpnakama=globalThis.webpackChunkwpnakama||[]).push([[417],{911:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(1609),n=a(6087),r=a(9739),l=a(5727),i=a(4051),c=a(5216),o=a(6062),d=a(8926),m=a(8723),u=a(2498),p=a(3845),f=a(6622);function g({selectedDate:e,setSelectedDate:t}){const[a]=(0,n.useState)(new Date((0,r.R)())),[g,x]=(0,n.useState)(e||a),{areDatesEqual:E}=(0,u.A)();let v=Number((0,l.GP)(a,"MM")),w=Number((0,l.GP)(a,"dd")),h=Number((0,l.GP)(g,"MM")),b=(0,l.GP)(g,"MMMM"),y=Number((0,l.GP)(g,"yyyy")),k=(0,i.P)(new Date(g));const N=[];for(let t=1;t<=k;t++){let a={};a.id=t,a.num=t,a.value=new Date(y,Number((0,l.GP)(g,"MM"))-1,t,(0,c.q)(new Date),(0,o.O)(new Date),(0,d.S)(new Date)),a.isToday=a.id==w,a.realMonth=h==v,a.isSelected=E(e,a.value),N.push(a)}let _;switch((0,m.P)(new Date(y,--h,1))){case 0:_="col-start-1";break;case 1:_="col-start-2";break;case 2:_="col-start-3";break;case 3:_="col-start-4";break;case 4:_="col-start-5";break;case 5:_="col-start-6";break;case 6:_="col-start-7";break;default:_="col-start-0"}function S(e){t(e.target.getAttribute("data-value"))}return(0,s.createElement)("div",{className:"flex flex-col gap-3 w-full"},(0,s.createElement)("div",{className:"p-3 font-medium text-base leading-6 flex gap-4 justify-between"},(0,s.createElement)("div",null,`${b} ${y}`),(0,s.createElement)("div",null,(0,s.createElement)(p.e2,{size:"sm"},(0,s.createElement)(p.e2.Item,{onClick:function(){x(new Date(0<=h<=11?y:y-1,h-1,w))},after:(0,s.createElement)(f.YJP,null)}),(0,s.createElement)(p.e2.Item,{onClick:function(){x(new Date(0<=h<=11?y:y+1,h+1,w))},after:(0,s.createElement)(f.vKP,null)})))),(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)("div",{className:"grid grid-cols-7 justify-center text-center"},(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"S"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"M"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"T"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"W"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"T"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"F"),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-300 font-medium"},"S")),(0,s.createElement)("div",{className:"grid grid-cols-7 grid-rows-6"},N.map((e=>(0,s.createElement)(n.Fragment,{key:e.id},(0,s.createElement)("div",{className:`text-center relative ${1==e.id&&_}`},e.isToday&&e.realMonth&&(0,s.createElement)("div",{className:"absolute top-1.5 left-[18px] w-1 h-1 bg-secondary rounded-full transition-all"}),(0,s.createElement)("div",{title:e.value,"data-value":e.value,className:"p-2 w-10 h-10 cursor-pointer text-slate-700 transition hover:bg-primary-50 hover:text-primary rounded-full text-sm leading-6 "+(e.isSelected?"bg-primary text-white":""),onClick:S},e.num))))))))}},9351:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(1609),n=a(7723),r=a(3845),l=a(6622);function i({license:e,devPosition:t=(0,n.__)("soon","wpnakama")}){return(0,s.createElement)(s.Fragment,null,"not found"===e?.status&&(0,s.createElement)(l.XAi,{className:"!text-secondary !opacity-100 size-5"}),"inactive"===e?.status&&(0,s.createElement)(l.wUM,{className:"!text-secondary !opacity-100 size-5"}),"active"===e?.status&&(0,s.createElement)(r.Ex,{className:"py-0.25 px-1",size:"sm",shape:"pill",color:"yellow",stroke:!0},t))}},7266:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(6087);function n(){const[e,t]=(0,s.useState)({});return{action:e,handleAction:(e=-1,a="")=>{t(0>e?{}:{id:e,type:a})}}}},725:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(1609);const n=(0,a(6087).forwardRef)(((e,t)=>(0,s.createElement)("svg",{...e,fill:"none",height:"24",ref:t,viewBox:"0 0 24 24",width:"24"},(0,s.createElement)("circle",{cx:"12",cy:"12",r:"4",fill:"currentColor"}))))},3111:(e,t,a)=>{a.r(t),a.d(t,{default:()=>We});var s=a(1609),n=a(7723),r=a(6087),l=a(7266),i=a(9785),c=a(2498),o=a(5038),d=a(6074),m=a(923),u=a.n(m),p=a(7494),f=a(9730),g=a(9765),x=a(9446),E=a(9e3),v=a(3845),w=a(6622),h=a(911);const b=a.p+"images/client.35bf567a.jpg",y=a.p+"images/password.b45531fb.jpg",k=a.p+"images/team.967289a0.jpg";var N=a(6703);function _(){const{goToPage:e}=(0,N.A)();return(0,s.createElement)("div",{className:"flex-shrink flex flex-col gap-4"},(0,s.createElement)("div",{className:"flex flex-col gap-4 w-[15.5rem] px-3 py-3 bg-white border border-surface-200 shadow-sm rounded-xl cursor-pointer",onClick:()=>e("wpnakama_license")},(0,s.createElement)("div",{className:"flex gap-2 items-center text-sm leading-4 font-semibold text-[#E67613]"},(0,s.createElement)(w.XAi,null),(0,n.__)("Upgrade to Pro","wpnakama")),(0,s.createElement)("div",null,(0,s.createElement)("img",{src:b,alt:"",className:"w-full"})),(0,s.createElement)("div",{className:"flex flex-col gap-0"},(0,s.createElement)("h2",{className:"text-base font-semibold"},(0,n.__)("Share with Client","wpnakama")),(0,s.createElement)("p",{className:"text-sm leading-5 text-surface-400"},(0,n.__)("Let your client create task, attach files, leave messages and see the progress.","wpnakama")))),(0,s.createElement)("div",{className:"flex flex-col gap-4 w-[15.5rem] px-3 py-3 bg-white border border-surface-200 shadow-sm rounded-xl cursor-pointer",onClick:()=>e("wpnakama_license")},(0,s.createElement)("div",{className:"flex gap-2 items-center text-sm leading-4 font-semibold text-[#E67613]"},(0,s.createElement)(w.XAi,null),(0,n.__)("Upgrade to Pro","wpnakama")),(0,s.createElement)("div",null,(0,s.createElement)("img",{src:y,alt:"",className:"w-full"})),(0,s.createElement)("div",{className:"flex flex-col gap-0"},(0,s.createElement)("h2",{className:"text-base font-semibold"},(0,n.__)("Protect with Password","wpnakama")),(0,s.createElement)("p",{className:"text-sm leading-5 text-surface-400"},(0,n.__)("Restrict who can access your board publicly using passwords.","wpnakama")))),(0,s.createElement)("div",{className:"flex flex-col gap-4 w-[15.5rem] px-3 py-3 bg-white border border-surface-200 shadow-sm rounded-xl cursor-pointer",onClick:()=>e("wpnakama_license")},(0,s.createElement)("div",{className:"flex gap-2 items-center text-sm leading-4 font-semibold text-[#E67613]"},(0,s.createElement)(w.XAi,null),(0,n.__)("Upgrade to Pro","wpnakama")),(0,s.createElement)("div",null,(0,s.createElement)("img",{src:k,alt:"",className:"w-full"})),(0,s.createElement)("div",{className:"flex flex-col gap-0"},(0,s.createElement)("h2",{className:"text-base font-semibold"},(0,n.__)("Team Collaboration","wpnakama")),(0,s.createElement)("p",{className:"text-sm leading-5 text-surface-400"},(0,n.__)("Assign tasks, share files and drop message right from your boardâ€™s dashboard. Create teams, assign and start collaborating.","wpnakama")))))}let S={data:""},C=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||S,P=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,R=/\/\*[^]*?\*\/|  +/g,A=/\n+/g,I=(e,t)=>{let a="",s="",n="";for(let r in e){let l=e[r];"@"==r[0]?"i"==r[1]?a=r+" "+l+";":s+="f"==r[1]?I(l,r):r+"{"+I(l,"k"==r[1]?"":t)+"}":"object"==typeof l?s+=I(l,t?t.replace(/([^,])+/g,(e=>r.replace(/(^:.*)|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):r):null!=l&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=I.p?I.p(r,l):r+":"+l+";")}return a+(t&&n?t+"{"+n+"}":n)+s},z={},T=e=>{if("object"==typeof e){let t="";for(let a in e)t+=a+T(e[a]);return t}return e},F=(e,t,a,s,n)=>{let r=T(e),l=z[r]||(z[r]=(e=>{let t=0,a=11;for(;t<e.length;)a=101*a+e.charCodeAt(t++)>>>0;return"go"+a})(r));if(!z[l]){let t=r!==e?e:(e=>{let t,a,s=[{}];for(;t=P.exec(e.replace(R,""));)t[4]?s.shift():t[3]?(a=t[3].replace(A," ").trim(),s.unshift(s[0][a]=s[0][a]||{})):s[0][t[1]]=t[2].replace(A," ").trim();return s[0]})(e);z[l]=I(n?{["@keyframes "+l]:t}:t,a?"":"."+l)}let i=a&&z.g?z.g:null;return a&&(z.g=z[l]),((e,t,a,s)=>{s?t.data=t.data.replace(s,e):-1===t.data.indexOf(e)&&(t.data=a?e+t.data:t.data+e)})(z[l],t,s,i),l},D=(e,t,a)=>e.reduce(((e,s,n)=>{let r=t[n];if(r&&r.call){let e=r(a),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":I(e,""):!1===e?"":e}return e+s+(null==r?"":r)}),"");function j(e){let t=this||{},a=e.call?e(t.p):e;return F(a.unshift?a.raw?D(a,[].slice.call(arguments,1),t.p):a.reduce(((e,a)=>Object.assign(e,a&&a.call?a(t.p):a)),{}):a,C(t.target),t.g,t.o,t.k)}j.bind({g:1});let $,L,M,W=j.bind({k:1});function U(e,t){let a=this||{};return function(){let s=arguments;function n(r,l){let i=Object.assign({},r),c=i.className||n.className;a.p=Object.assign({theme:L&&L()},i),a.o=/ *go\d+/.test(c),i.className=j.apply(a,s)+(c?" "+c:""),t&&(i.ref=l);let o=e;return e[0]&&(o=i.as||e,delete i.as),M&&o[0]&&M(i),$(o,i)}return t?t(n):n}}var q=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,B=(()=>{let e=0;return()=>(++e).toString()})(),G=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),O=new Map,K=e=>{if(O.has(e))return;let t=setTimeout((()=>{O.delete(e),Y({type:4,toastId:e})}),1e3);O.set(e,t)},H=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return t.toast.id&&(e=>{let t=O.get(e);t&&clearTimeout(t)})(t.toast.id),{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:a}=t;return e.toasts.find((e=>e.id===a.id))?H(e,{type:1,toast:a}):H(e,{type:0,toast:a});case 3:let{toastId:s}=t;return s?K(s):e.toasts.forEach((e=>{K(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===s||void 0===s?{...e,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let n=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+n})))}}},V=[],X={toasts:[],pausedAt:void 0},Y=e=>{X=H(X,e),V.forEach((e=>{e(X)}))},Q=e=>(t,a)=>{let s=((e,t="blank",a)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:(null==a?void 0:a.id)||B()}))(t,e,a);return Y({type:2,toast:s}),s.id},J=(e,t)=>Q("blank")(e,t);J.error=Q("error"),J.success=Q("success"),J.loading=Q("loading"),J.custom=Q("custom"),J.dismiss=e=>{Y({type:3,toastId:e})},J.remove=e=>Y({type:4,toastId:e}),J.promise=(e,t,a)=>{let s=J.loading(t.loading,{...a,...null==a?void 0:a.loading});return e.then((e=>(J.success(q(t.success,e),{id:s,...a,...null==a?void 0:a.success}),e))).catch((e=>{J.error(q(t.error,e),{id:s,...a,...null==a?void 0:a.error})})),e};var Z=W`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ee=W`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,te=W`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ae=U("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Z} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ee} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${te} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,se=W`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ne=U("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${se} 1s linear infinite;
`,re=W`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,le=W`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ie=U("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${re} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${le} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ce=U("div")`
  position: absolute;
`,oe=U("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,de=W`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,me=U("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${de} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ue=({toast:e})=>{let{icon:t,type:a,iconTheme:n}=e;return void 0!==t?"string"==typeof t?s.createElement(me,null,t):t:"blank"===a?null:s.createElement(oe,null,s.createElement(ne,{...n}),"loading"!==a&&s.createElement(ce,null,"error"===a?s.createElement(ae,{...n}):s.createElement(ie,{...n})))},pe=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,fe=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ge=U("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xe=U("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`;s.memo((({toast:e,position:t,style:a,children:n})=>{let r=e.height?((e,t)=>{let a=e.includes("top")?1:-1,[s,n]=G()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[pe(a),fe(a)];return{animation:t?`${W(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${W(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},l=s.createElement(ue,{toast:e}),i=s.createElement(xe,{...e.ariaProps},q(e.message,e));return s.createElement(ge,{className:e.className,style:{...r,...a,...e.style}},"function"==typeof n?n({icon:l,message:i}):s.createElement(s.Fragment,null,l,i))})),function(e){I.p=void 0,$=e,L=void 0,M=void 0}(s.createElement),j`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Ee=J,ve=a(6427),we=a(7941),he=a(2599),be=a(9523),ye=a(7143);const ke=(0,r.createContext)();function Ne({children:e,boardId:t,taskId:a,action:n,handleAction:r}){return(0,s.createElement)(ke.Provider,{value:{boardId:t,taskId:a,action:n,handleAction:r}},(0,s.createElement)("div",{className:"flex flex-col gap-4"},e))}const _e=({id:e,title:t,isResolving:a=!1})=>{var l;const{boardId:i,taskId:c,action:o,handleAction:d}=(0,r.useContext)(ke),[m,u]=(0,r.useState)(!1),{goToPage:p}=(0,N.A)(),f=(0,r.useContext)(be.t),{deleteEntityRecord:x,editEntityRecord:E,saveEditedEntityRecord:h,undo:b}=(0,ye.useDispatch)(f),y=["WPNakama","task",e,{board_id:i,card_id:c}],{edited:k,deleteError:_}=(0,ye.useSelect)((e=>({edited:e(f).getEditedEntityRecord(...y),deleteError:e(f).getLastEntityDeleteError(...y)})),[e]);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(he.P.div,{layout:!0,transition:{opacity:{ease:"linear"},layout:{duration:.3}}},(0,s.createElement)(v.Sc.Root,{asChild:!0,className:"group flex text-sm w-full cursor-pointer items-center justify-between rounded-lg border px-3 py-2 shadow-wg-xs outline-2 -outline-offset-1 outline-primary [&:has([data-state=checked])]:outline "+((0,g.A)(k.is_completed)?"bg-primary-100/30 border-primary text-primary-700":"wg-bg-white border-surface-100")},m?(0,s.createElement)(Se,{id:e,edited:k,handleOpen:u,isResolving:a}):(0,s.createElement)("label",null,(0,s.createElement)(v.Sc.Item,{defaultChecked:(0,g.A)(k.is_completed),checked:(0,g.A)(k.is_completed),onCheckedChange:t=>async function(e,t){await E("WPNakama","task",e,{board_id:i,card_id:c,is_completed:t}),d(e,"edit"),await h(...y)?d():(b(),Ee.error((0,n.__)("Something went wrong!","wpnakama")))}(e,t)}),(0,s.createElement)("div",{className:"flex grow items-center"},(0,s.createElement)("span",{className:"flex-grow select-none transition "+((0,g.A)(k.is_completed)?"line-through":"no-underline")},null!==(l=k.content)&&void 0!==l?l:t),(0,s.createElement)("div",{className:"flex-shrink"},"edit"!==o.type&&!a||"delete"===o.type||o.id!==k.task_id?(0,s.createElement)("div",{className:"opacity-0 group-hover:opacity-100 flex gap-2 flex-nowrap"},(0,s.createElement)(v.m_,{content:(0,s.createElement)(v.$n,{variant:"link",className:"text-sm leading-5 text-white",onClick:()=>p("wpnakama_license")},(0,n.__)("Upcoming Pro Feature","wpnakama")),color:"secondary"},(0,s.createElement)(v.$n,{before:(0,s.createElement)(w.Rvf,null),variant:"link",size:"sm"})),(0,s.createElement)(v.$n,{before:(0,s.createElement)(w.qUP,null),variant:"link",size:"sm",onClick:()=>u(!0),disabled:a||"delete"===o.type||"edit"===o.type}),(0,s.createElement)(v.AM,null,(0,s.createElement)(v.AM.Trigger,{className:"group p-[6px]",disabled:a||"delete"===o.type||"edit"===o.type},a?(0,s.createElement)(v.Rh,{type:"line",className:"text-wg-red-300",size:"xs"}):(0,s.createElement)(w.ucK,{className:"text-wg-red size-5 opacity-90 group-hover:opacity-100"})),(0,s.createElement)(v.AM.Portal,null,(0,s.createElement)(v.AM.Content,{side:"right"},(0,s.createElement)("div",{className:"w-60 flex flex-col gap-5 text-center text-sm text-surface-500"},(0,s.createElement)("div",null,(0,s.createElement)("h2",{className:"text-base text-black font-medium"},(0,n.__)("Are you sure?","wpnakama")),(0,s.createElement)("p",null,(0,n.__)("Deleting a todo will delete all its data from server.","wpnakama"))),(0,s.createElement)("div",{className:"flex gap-2"},(0,s.createElement)(v.AM.Close,{className:"group inline-flex select-none items-center justify-center text-sm font-medium leading-6 transition-colors duration-100 wg-antialiased focus:outline-0 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:pointer-events-none gap-1 px-12px rounded-lg border border-surface-200 shadow-wg-xs [--wg-border-width:1px] hover:bg-surface disabled:border-surface-50 py-8px text-surface-900 outline-primary disabled:text-surface-300 flex-shrink"},(0,s.createElement)("span",{className:"px-1"},(0,n.__)("Cancel","wpnakama"))),(0,s.createElement)(v.$n,{destructive:!0,onClick:()=>async function(e){d(e,"delete"),await x(...y)?(Ee.success((0,n.__)("Successfully deleted the todo.","wpnakama")),d()):(b(),Ee.error((0,n.__)("Something went wrong while deleting the todo","wpnakama")))}(e),className:"flex-grow",before:"delete"===o.type?(0,s.createElement)(v.Rh,{type:"line",className:"text-wg-red-300",size:"xs"}):(0,s.createElement)(s.Fragment,null)},(0,n.__)("Delete","wpnakama")))))))):(0,s.createElement)(v.$n,{before:(0,s.createElement)(v.Rh,{type:"line",className:"text-primary-300"}),variant:"link",size:"sm"})))))),_&&(0,s.createElement)("div",{className:"m-auto mt-6 max-w-sm text-left"},(0,s.createElement)(v.Fc,{before:(0,s.createElement)(EmojiSadIcon,null),color:"error",title:(0,n.__)("Something went wrong while deleting this list.","wpnakama"),variant:"expanded",className:"p-2"},(0,s.createElement)("div",null,_))))},Se=({id:e,edited:t,handleOpen:a,isResolving:l})=>{var c;const{boardId:o,taskId:d,handleAction:m}=(0,r.useContext)(ke),{register:u,handleSubmit:p,watch:f,formState:{errors:g}}=(0,i.mN)(),x=(0,r.useContext)(be.t),{editEntityRecord:E,saveEditedEntityRecord:h,undo:b}=(0,ye.useDispatch)(x),y=["WPNakama","task",e,{board_id:o,card_id:d}],{saveError:k}=(0,ye.useSelect)((e=>({saveError:e(x).getLastEntitySaveError(...y)})),[e]);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"flex justify-between items-center gap-1"},(0,s.createElement)("div",{className:"flex-grow text-sm leading-5 px-1 py-1 rounded-sm"},(0,s.createElement)(v.pd,{className:`p-1 shadow-none border-0 w-full h-[42px] bg-wg-white ${null!==(c=t?.content)&&void 0!==c?c:" cursor-wait animate-pulse"}`,...u("content",{required:!0,minLength:3}),defaultValue:t.content,destructive:!!g.content,disabled:l,placeholder:t.content,autoFocus:!!t?.content})),(0,s.createElement)("div",{className:"flex flex-shrink gap-1 items-center"},(0,s.createElement)(v.$n,{variant:"outline",onClick:p((async function({content:t}){await async function(t){await E("WPNakama","task",e,{board_id:o,card_id:d,content:t})}(t),await h(...y)?(m(e,"edit"),Ee.success((0,n.__)("Successfuly renamed the todo","wpnakama")),a(!1),m()):(b(),Ee.error((0,n.__)("Something went wrong!","wpnakama")))})),disabled:l,size:"xs-icon",className:"px-[6px] py-2 !leading-[0] bg-white",title:(0,n.__)("Save the edited board title","wpnakama")},l?(0,s.createElement)(v.Rh,{type:"line",size:"xxs",className:"text-surface-100"}):(0,s.createElement)(w.Srz,{className:"w-4 h-4"})),(0,s.createElement)(v.$n,{variant:"outline",onClick:()=>{a(!1)},size:"xs-icon",destructive:!0,className:"px-[6px] py-2 !leading-[0] bg-white",disabled:l,title:(0,n.__)("Disable rename mode","wpnakama")},(0,s.createElement)(w.USm,{className:"w-4 h-4"})))),(k||g.content)&&(0,s.createElement)("div",{className:"m-auto mt-1 w-full text-left"},(0,s.createElement)(v.Fc,{before:(0,s.createElement)(EmojiSadIcon,null),color:"error",title:(0,n.__)("There was a problem with your submission","wpnakama"),variant:"expanded",className:"p-2"},(0,s.createElement)("div",null,"required"===g.content?.type?(0,n.__)("Title is required.","wpnakama"):"minLength"===g.content?.type?(0,n.__)("At least have 3 characters.","wpnakama"):k))))},Ce=()=>(0,s.createElement)("div",{className:"flex gap-2 w-full h-[50px] cursor-wait items-center justify-start rounded-lg border px-3 py-2 shadow-wg-xs wg-bg-white border-surface-100"},(0,s.createElement)("div",{className:"w-4 h-4 rounded-sm bg-surface-100 animate-pulse"}),(0,s.createElement)("div",{className:"w-60 h-3 bg-surface-100 animate-pulse"}));var Pe;function Re({boardId:e,taskId:t,todos:a,isResolved:n,action:l,handleAction:i}){var c,o,d,m;const[u,p]=(0,r.useState)([]),[f,x]=(0,r.useState)("");(0,r.useEffect)((()=>{let e=!1;return e||p(a),()=>{e=!0}}),[a]);let E=u?.sort(((e,t)=>e.position-t.position));0<f.length&&u&&(E=E.filter((e=>"completed"===f?(0,g.A)(e.is_completed):!(0,g.A)(e.is_completed))));const v=null!==(c=u?.length)&&void 0!==c?c:0;return(0,s.createElement)(Ne,{boardId:e,taskId:t,action:l,handleAction:i},(0,s.createElement)("div",{className:"flex flex-col gap-2"},(0,s.createElement)(Ne.Add,{position:null!==(o=u?.length)&&void 0!==o?o:0}),0!==v&&(0,s.createElement)(Ne.Filter,{status:f,setStatus:x,handleFilterTags:function(e){e.preventDefault(),x("")},totTodos:null!==(d=E?.length)&&void 0!==d?d:0,isResolved:n})),0===v?(0,s.createElement)(s.Fragment,null,n?(0,s.createElement)(Ne.NoData,{status:0===E?.length?"":f,totTodos:null!==(m=E?.length)&&void 0!==m?m:0}):(0,s.createElement)(Ne.ListItemLoading,null)):(0,s.createElement)(Ne.List,null,E?.map((e=>(0,s.createElement)(Ne.ListItemWithLoader,{key:e.task_id,id:e.task_id,title:e.content}))),"add"===l.type&&!n&&(0,s.createElement)(Ne.ListItemLoading,null)))}Ne.List=({children:e})=>(0,s.createElement)(we.o,{className:"flex flex-col gap-3"},e),Ne.ListItem=_e,Ne.ListItemWithLoader=(Pe=_e,e=>{const{boardId:t,taskId:a}=(0,r.useContext)(ke),n=(0,r.useContext)(be.t),{isSaving:l,isDeleting:i}=(0,ye.useSelect)((s=>{const r=["WPNakama","task",e.id,{board_id:t,card_id:a}];return{isSaving:s(n).isSavingEntityRecord(...r),isDeleting:s(n).isDeletingEntityRecord(...r)}}),[]);return e.isResolving=l||i,(0,s.createElement)("div",{className:"relative"},i?(0,s.createElement)(Ce,null):(0,s.createElement)(he.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.35,delay:0},exit:{opacity:0},className:`${l&&"animate-pulse"}`},(0,s.createElement)(Pe,{...e})))}),Ne.NoData=({status:e,totTodos:t})=>(0,s.createElement)(s.Fragment,null,0===t&&(0,s.createElement)(s.Fragment,null)),Ne.ListItemLoading=Ce,Ne.Filter=({status:e,setStatus:t,isResolved:a,handleFilterTags:l,totTodos:i})=>{const{action:c}=(0,r.useContext)(ke);return(0,s.createElement)("div",{className:"flex gap-3 justify-between"},(0,s.createElement)("div",{className:"flex gap-2"},e&&(0,s.createElement)(v.vw,{closable:!0,stroke:!0,onClose:l,className:"text-xs"},(0,s.createElement)(v.Ex,{size:"sm",className:"text-xs py-1 px-1.5",color:"transparent",after:a&&"edit"!==c.type?(0,s.createElement)("div",{className:"ml-1 p-1 bg-gray-200 text-surface-500 rounded-full flex items-center justify-center"},i):(0,s.createElement)(w.Nl1,{className:"animate-spin size-5"})},e))),(0,s.createElement)("div",{className:"flex gap-2"},(0,s.createElement)(v.rI,null,(0,s.createElement)(v.rI.Trigger,{asChild:!0},(0,s.createElement)(v.$n,{before:(0,s.createElement)(w.YGH,null),variant:"outline",size:"xs-icon",shape:"pill",className:"text-xs bg-wg-white"},(0,n.__)("Filter by","wpnakama"))),(0,s.createElement)(v.rI.Content,{align:"end",className:"z-10"},(0,s.createElement)(v.rI.Group,null,(0,s.createElement)(v.rI.Item,{onClick:()=>t("completed")},(0,n.__)("Complete","wpnakama")),(0,s.createElement)(v.rI.Item,{onClick:()=>t("incomplete")},(0,n.__)("Incomplete","wpnakama")))))))},Ne.Add=({position:e})=>{const{boardId:t,taskId:a,action:l,handleAction:c}=(0,r.useContext)(ke),{register:o,handleSubmit:d,formState:{errors:m},reset:u,setFocus:p}=(0,i.mN)(),f=(0,r.useContext)(be.t),{saveEntityRecord:g,undo:x}=(0,ye.useDispatch)(f),{isSaving:E,saveError:w,userId:h}=(0,ye.useSelect)((e=>{const t=["WPNakama","task"];return{isSaving:e(f).isSavingEntityRecord(...t),saveError:e(f).getLastEntitySaveError(...t),userId:e(f).getCurrentUser().id}}),[t,a]);async function b({content:s}){c(0,"add");const r=await g("WPNakama","task",{board_id:t,card_id:a,user_id:h,content:s,position:e});u({content:""}),r?(c(r.data.task_id,"add"),Ee.success((0,n.__)("Successfully added the todo.","wpnakama")),c(),setTimeout((()=>p("content")),0)):(x(),Ee.error((0,n.__)("Something went wrong while saving the todo","wpnakama")))}return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(ve.KeyboardShortcuts,{shortcuts:{enter:d(b)}},(0,s.createElement)("div",{className:"relative"},(0,s.createElement)(v.pd,{...o("content",{required:!0,minLength:3}),disabled:E,destructive:!!m.content,className:" pr-20 "+(m.content?"text-wg-red":"text-surface-500"),helperText:"required"===m.content?.type?(0,n.__)("Empty todo is not allowed.","wpnakama"):"minLength"===m.content?.type?(0,n.__)("At least have 3 characters.","wpnakama"):"",placeholder:(0,n.__)("Type and enter to create a ToDo","wpnakama")}),E?(0,s.createElement)(v.Rh,{type:"line",className:"text-surface-100 absolute size-4 top-1/2 -translate-y-1/2 right-1",size:"xs"}):(0,s.createElement)(v.ue,{keys:["enter"],className:"absolute gap-2 top-[8px] right-2 py-1 px-2 text-sm leading-tight rounded-md",onClick:d(b)},(0,n.__)("enter","wpnakama")))),w&&(0,s.createElement)("div",{className:"m-auto mt-6 max-w-sm text-left"},(0,s.createElement)(v.Fc,{before:(0,s.createElement)(EmojiSadIcon,null),color:"error",title:(0,n.__)("There was a problem with your submission","wpnakama"),variant:"expanded"},(0,s.createElement)("div",null,w))))};var Ae=a(725);function Ie({excludePosts:e,selectedPostIds:t,setSelectedPostIds:a,open:l,handleOpen:i}){const[c,o]=(0,r.useState)(""),[d,m]=(0,r.useState)(1),{totPages:u}=function(e,t=10,a={}){const[s,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(0),[c,o]=(0,r.useState)(0);return(0,r.useEffect)((()=>{let s=!1;return(0,f.V0)(e,{...a,_fields:"id",per_page:t}).then((e=>{s||(o((()=>parseInt(e.headers.get("X-WP-TotalPages")))),i((()=>parseInt(e.headers.get("X-WP-Total")))),n((e=>!e)))})),()=>{s=!0}}),[]),{hasResolved:s,totItems:l,totPages:c}}("/wp/v2/search",5),p=(0,r.useContext)(be.t),{posts:g,isResolved:x}=(0,ye.useSelect)((t=>{const a=["WPNakama","searchpost",{context:"view",type:"post",subtype:"post",_fields:"id",status:"publish,draft,private,protected,future",exclude:e,search:c,per_page:5,page:d}];return{posts:t(p).getEntityRecords(...a),isResolved:t(p).hasFinishedResolution("getEntityRecords",a)}}),[c,d]);function E(e){"prev"===e&&m((e=>--e)),"next"===e&&m((e=>++e))}return(0,r.useEffect)((()=>(document.body.style.overflow=l?"hidden":"",()=>{document.body.style.overflow=""})),[l]),(0,r.useEffect)((()=>{x&&0===g?.length&&d>1&&m(1)}),[g,x]),(0,s.createElement)("div",{className:"fixed w-dvw h-dvh top-0 left-0 z-[9991]"},(0,s.createElement)(ve.KeyboardShortcuts,{shortcuts:{esc:()=>i(!1)},bindGlobal:!0}),(0,s.createElement)("div",{className:"z-40 bg-primary-50/50 w-full h-full absolute top-0 left-0 backdrop-blur-md",onClick:()=>i(!1)}),(0,s.createElement)("div",{className:" max-w-[600px] z-50 absolute top-[50px] left-1/2 -translate-x-1/2 border bg-wg-white border-surface rounded-xl shadow-wg-xs w-full"},(0,s.createElement)("div",{className:"border-b-[1px] border-surface-100"},(0,s.createElement)("div",{className:"relative rounded-t-xl"},x?(0,s.createElement)(w.WIv,{className:"z-10 size-6 text-surface-400 absolute top-2 left-2"}):(0,s.createElement)(v.Rh,{className:"z-10 size-4 text-surface-200 absolute top-3 left-3"}),(0,s.createElement)(v.pd,{required:!0,placeholder:(0,n.__)("Search posts","wpnakama"),className:"rounded-t-xl pl-10 rounded-b-none border-none outline-none outline-transparent focus:outline-none",onChange:function({target:{value:e}}){x&&d>1&&m(1),o(e)},autoFocus:!0}))),(0,s.createElement)("div",{className:"px-4 py-8"},(0,s.createElement)(ve.__experimentalScrollable,{scrollDirection:"y",className:"w-full min-h-44 max-h-44 flex flex-col gap-3"},x?(0,s.createElement)(s.Fragment,null,0===g?.length?(0,s.createElement)("div",{className:"text-sm text-surface-400 flex justify-center"},(0,s.createElement)("div",null,(0,n.__)("No data found"))):(0,s.createElement)(we.o,null,g?.map((e=>(0,s.createElement)(Te,{id:e.id,selectedIds:t,setSelectedIds:a}))))):(0,s.createElement)("div",{className:"w-full h-full flex flex-col gap-1 items-center justify-center"},(0,s.createElement)("div",{className:"flex gap-1 justify-center"},(0,s.createElement)("div",{className:"animate-bounce"},(0,s.createElement)(Ae.A,{className:"text-surface-200 size-6"})),(0,s.createElement)("div",{className:"animate-bounce delay-200"},(0,s.createElement)(Ae.A,{className:"size-6 text-surface-200"})),(0,s.createElement)("div",{className:"animate-bounce dealy-500"},(0,s.createElement)(Ae.A,{className:"size-6 text-surface-200"}))),(0,s.createElement)("div",{className:"text-sm text-surface-400"},(0,n.__)("Fetching Data","wpnakama"))))),(0,s.createElement)("div",{className:"text-xs py-2 px-2 text-surface-500 border-t-[1px] border-surface-100 flex justify-between gap-3"},(0,s.createElement)("div",{className:"flex gap-1 items-center py-0.5 leading-tight"},(0,s.createElement)(v.ue,{size:"xs",className:"leading-tight font-medium"},"esc"),(0,n.__)("to close","wpnakama")),(0,s.createElement)("div",{className:"flex gap-1 items-center py-0.5 leading-tight"},(0,n.__)(`Page ${d}`,"wpnakama"),(0,s.createElement)(v.e2,null,(0,s.createElement)(v.e2.Item,{after:(0,s.createElement)(w.YJP,null),size:"xs-icon",disabled:d<=1,onClick:()=>E("prev")}),(0,s.createElement)(v.e2.Item,{after:(0,s.createElement)(w.vKP,null),size:"xs-icon",disabled:0===g?.length||1===u||d===u-1,onClick:()=>E("next")}))))))}const ze=({handleOpen:e})=>(0,s.createElement)("div",{className:"relative rounded-t-xl"},(0,s.createElement)(ve.KeyboardShortcuts,{shortcuts:{"ctrl+alt+p":()=>e((e=>!e))}}),(0,s.createElement)(w.WIv,{className:"z-10 size-6 text-surface-400 absolute top-2 left-2"}),(0,s.createElement)(v.pd,{required:!0,placeholder:(0,n.__)("Search posts","wpnakama"),className:"rounded-xl px-10 border-none outline-none outline-transparent focus:outline-none",onClick:()=>e(!0)}),(0,s.createElement)(v.ue,{size:"xs",keys:["command","option"],className:"z-10 leading-tight absolute top-2.5 right-2"},"P")),Te=({id:e,selectedIds:t,setSelectedIds:a})=>{const n=(0,r.useContext)(be.t),{edited:l,isResolved:i}=(0,ye.useSelect)((t=>({edited:t(n).getEditedEntityRecord("WPNakama","post",e),isResolved:t(n).hasFinishedResolution("getEditedEntityRecord",["WPNakama","post",e])})),[e]),c=t.includes(e);return(0,s.createElement)(s.Fragment,null,i?(0,s.createElement)(he.P.div,{layout:!0,transition:{layout:{ease:"linear",duration:.3}},className:"transition text-base leading-6 px-4 py-3 rounded-xl mx-auto w-[98%] flex gap-4 justify-between "+(c?"bg-surface-50/50 text-surface":"bg-primary-50/50 text-primary")},(0,s.createElement)("div",null,(0,s.createElement)(ve.ExternalLink,{href:l?.link,className:"block no-underline "+(c?"text-surface-700 hover:text-surface-900 focus:outline-surface":"text-primary hover:text-primary-700 focus:outline-primary")},l?.title?.rendered),(0,s.createElement)(v.Ex,{size:"sm",shape:"pill",stroke:!0,color:"publish"!==l?.status||c?"gray":"green",className:`text-xs ${c&&"bg-surface-200"}`},l?.status)),(0,s.createElement)("div",null,(0,s.createElement)(v.$n,{before:c?(0,s.createElement)(w.QGg,null):(0,s.createElement)(w.c11,null),variant:c?"tertiary":"primary",className:`${c&&"bg-surface-200"}`,onClick:function(){if(t.includes(e))return a((t=>t.filter((t=>t!==e)))),!0;a((t=>[...t,e]))}}))):(0,s.createElement)(Fe,null))},Fe=()=>(0,s.createElement)(he.P.div,{layout:!0,className:"px-4 py-3 rounded-xl bg-primary-50/50 text-primary mx-auto w-[98%] flex justify-between transition"},(0,s.createElement)("div",{className:"flex flex-col gap-1"},(0,s.createElement)("div",{className:"animate-pulse w-52 h-6 rounded-sm bg-primary-100"}),(0,s.createElement)("div",{className:"animate-pulse w-14 h-6 rounded-full bg-primary-100"})),(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"animate-pulse size-10 rounded-md bg-primary-100"}))),De=({children:e})=>(0,s.createElement)("div",{className:"flex flex-col gap-4"},e),je=({id:e,removeSelectedId:t})=>{const a=(0,r.useContext)(be.t),{edited:n,isResolved:l}=(0,ye.useSelect)((t=>({edited:t(a).getEditedEntityRecord("WPNakama","post",e),isResolved:t(a).hasFinishedResolution("getEditedEntityRecord",["WPNakama","post",e])})),[e]);return(0,s.createElement)(s.Fragment,null,l?(0,s.createElement)(he.P.div,{layout:!0,transition:{layout:{ease:"linear",duration:.3}},className:"transition text-sm leading-6 px-4 py-3 rounded-xl flex justify-between wg-bg-white border border-surface-100 shadow-wg-xs"},(0,s.createElement)("div",null,(0,s.createElement)(ve.ExternalLink,{href:n?.link,className:"block no-underline text-primary hover:text-primary-700 focus:outline-primary"},n?.title?.rendered),(0,s.createElement)("div",{className:"flex gap-1"},(0,s.createElement)(v.Ex,{size:"sm",shape:"pill",stroke:!0,color:"publish"===n?.status?"green":"gray",className:"text-xs"},n?.status),(0,s.createElement)(v.Ex,{size:"sm",shape:"pill",stroke:!0,color:"yellow",className:"text-xs"},n?.type))),(0,s.createElement)("div",null,(0,s.createElement)(v.$n,{before:(0,s.createElement)(w.QGg,null),variant:"tertiary",size:"xs-icon",onClick:function(){t(e)}}))):(0,s.createElement)(he.P.div,{layout:!0,className:"w-full px-4 py-3 rounded-xl border border-surface-100 bg-white mx-auto flex justify-between transition"},(0,s.createElement)("div",{className:"flex flex-col gap-1"},(0,s.createElement)("div",{className:"animate-pulse w-52 h-5 rounded-sm bg-surface-100"}),(0,s.createElement)("div",{className:"animate-pulse w-14 h-6 rounded-full bg-surface-100"})),(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"animate-pulse size-5 rounded-md bg-surface-100"}))))};var $e=a(9351),Le=a(2506),Me=a(6744);function We(){var e,t,a,m;const b=(0,r.useRef)(!1),y=(0,r.useRef)(null),[k,S]=(0,r.useState)([]),[C,P]=(0,r.useState)(!1),{action:R,handleAction:A}=(0,l.A)(),{boardId:I,taskId:z}=(0,Le.S)(),{goToPage:T,goToBoardPage:F}=(0,N.A)(),{isDeadLinePassed:D,sqlDateFormat:j,displayDateFormat:$}=(0,c.A)(),{addTaskInPost:L,removeTaskFromPost:M}=function(){const e=(0,p.createQueue)();async function t(e){var t;const a=await(0,f.V0)(`/wp/v2/posts/${e}`,{_fields:"meta"}).then((e=>e.json()));return null!==(t=a?.meta?.wpnakama_tasks)&&void 0!==t?t:[]}return{addTaskInPost:async function(a,s){s=Number(s);const n=[...(await t(a)).map((e=>Number(e))),s],r=[...new Set(n)];e.add({postId:a,meta:{wpnakama_tasks:r}},(0,f.Qt)("/wp/v2/posts",a,{meta:{wpnakama_tasks:r}}))},removeTaskFromPost:async function(a,s){s=Number(s);const n=(await t(a)).map((e=>Number(e))),r=[...await(n?.filter((e=>e!==s)))].join(",");e.add({postId:a,meta:{wpnakama_tasks:r}},(0,f.Qt)("/wp/v2/posts",a,{meta:{wpnakama_tasks:r}}))}}}(),{license:W}=(0,Me.A)(),U=(0,r.useRef)(!1),q=(0,r.useRef)(!1),B=(0,r.useRef)(!1),{register:G,watch:O,handleSubmit:K,formState:{errors:H},reset:V}=(0,i.mN)(),X=O(),Y=(0,r.useContext)(be.t),{editEntityRecord:Q,saveEditedEntityRecord:J,undo:Z}=(0,ye.useDispatch)(Y),ee=["WPNakama","board",I,{_fields:"title"}],te=["WPNakama","card",z,{board_id:I}],ae=["WPNakama","task",{order_by:"position",board_id:I,card_id:z,per_page:51}],se=["WPNakama","phase",{board_id:I,order_by:"position"}],{board:ne,task:re,isResolved:le,isTaskSaving:ie,taskHasSaveErrors:ce,isTaskDeleting:oe,listsByBoardId:de,islistsByBoardIdResolved:me}=(0,ye.useSelect)((e=>({board:e(Y).getEntityRecord(...ee),task:e(Y).getEntityRecord(...te),isResolved:e(Y).hasFinishedResolution("getEntityRecord",te),isTaskSaving:e(Y).isSavingEntityRecord(...te),isTaskDeleting:e(Y).isDeletingEntityRecord(...te),taskHasSaveErrors:e(Y).getLastEntitySaveError(...te),listsByBoardId:e(Y).getEntityRecords(...se),islistsByBoardIdResolved:e(Y).hasFinishedResolution("getEntityRecords",se)})),[I,z]),{unionBoardsTasks:ue}=(0,ye.useSelect)((e=>({unionBoardsTasks:e(Y).getEntityRecords("WPNakama","unionboardtask")})),[]),{taskEdited:pe,isTaskEditedResolved:fe,taskHasEdited:ge}=(0,ye.useSelect)((e=>({taskEdited:e(Y).getEditedEntityRecord(...te),isTaskEditedResolved:e(Y).hasFinishedResolution("getEditedEntityRecord",te),taskHasEdited:e(Y).hasEditsForEntityRecord(...te)})),[I]);(0,r.useEffect)((()=>{S((()=>pe?.post_ids?pe?.post_ids.split(","):[]))}),[pe]);const{todos:xe,isTodosResolved:Ee}=(0,ye.useSelect)((e=>({todos:e(Y).getEntityRecords(...ae),isTodosResolved:e(Y).hasFinishedResolution("getEntityRecords",ae)})),[I,z]),ve=!(!pe.card_deadline_date||!(0,d.f)(new Date(pe.card_deadline_date)))&&new Date(pe.card_deadline_date),we=!!ve&&$(ve),he=!!ve&&D(ve);function ke(e){S((t=>t.filter((t=>t!==e))))}le&&!b.current&&(b.current=!0);const Ne=null!==(e=xe?.length)&&void 0!==e?e:0;return(0,s.createElement)(s.Fragment,null,le||b.current?(0,s.createElement)("div",{className:"relative -top-2"},(0,s.createElement)("div",{className:"flex justify-between items-center"},(0,s.createElement)("div",{className:"text-xs leading-5 text-surface-300 flex gap-1 items-center"},(0,s.createElement)("div",{className:"cursor-pointer hover:text-surface-500 focus:text-surface-400",onClick:()=>T()},(0,n.__)("Boards","wpnakama")),(0,s.createElement)(w.vKP,{className:"text-surface-400 w-5 h-5"}),(0,s.createElement)("div",{className:"cursor-pointer hover:text-surface-500 focus:text-surface-400",onClick:()=>F(I)},ne?.title),(0,s.createElement)(w.vKP,{className:"w-5 h-5 text-surface-400"}),(0,s.createElement)("div",{className:"text-surface-500 font-medium"},re?.title))),(0,s.createElement)("div",{className:"mt-6"},(0,s.createElement)(v.tU,{variant:"contained-bottom",defaultValue:"todos"},(0,s.createElement)("div",{className:"header-subpage flex gap-3 items-end justify-between"},(0,s.createElement)("div",{className:"w-full flex flex-col gap-2 flex-grow"},(0,s.createElement)("h2",{className:"font-semibold text-lg leading-6"},ge?pe.title:(0,s.createElement)(s.Fragment,null,null!==(t=re?.title)&&void 0!==t?t:(0,s.createElement)("div",{className:"animate-pulse w-full h-4 rounded-sm"}))),(0,s.createElement)("div",{className:"flex gap-3"},(0,s.createElement)("div",null,(0,s.createElement)(v.tU.List,{className:"border-none dark:border-none bg-transparent dark:bg-transparent !shadow-none dark:shadow-none"},(0,s.createElement)(v.tU.Trigger,{before:(0,s.createElement)(w.CTc,{className:"w-5 h-5 font-medium "+(!(0,g.A)(pe?.is_completed)&&he?"text-wg-red-500":"text-gray-600")}),value:"settings",className:"bg-surface-200/25 font-medium hover:bg-surface-200/50 border-1 border-surface-200 text-surface-500 hover:text-surface-500 data-[state=active]:text-surface-500 text-sm px-2 pt-1 pb-2",onClick:()=>y.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},(0,d.f)(new Date(pe.card_deadline_date))?(0,s.createElement)("div",{className:"text-sm leading-6 "+(!(0,g.A)(pe?.is_completed)&&he?"text-wg-red-500":"text-gray-500")},`Deadline - ${$(ve)}`):(0,n.__)("Select deadline","wpnakama")))),(0,s.createElement)(v.$n,{before:!U.current||!ie&&fe?(0,s.createElement)(s.Fragment,null,Number(pe?.is_completed)?(0,s.createElement)(w.C1y,{className:"text-wg-green-500"}):(0,s.createElement)(w.C1y,null)):(0,s.createElement)(w.Nl1,{className:"animate-spin"}),size:"sm",variant:"outline",className:"bg-wg-white text-surface-500",onClick:async function(){U.current=!0,await Q("WPNakama","card",z,{board_id:I,is_completed:!(0,g.A)(pe.is_completed)}),await J(...te)||(Z(),o.Ay.error((0,n.__)("Someting went wrong while saving.","wpnakama"))),U.current=!1}},Number(pe?.is_completed)?(0,s.createElement)("span",{className:"text-wg-green-500"},(0,n.__)("Completed","wpnakama")):(0,n.__)("Mark as complete","wpnakama")),(0,s.createElement)(v.AM,null,(0,s.createElement)(v.AM.Trigger,{asChild:!0},(0,s.createElement)(v.$n,{variant:"outline",size:"sm",after:(0,s.createElement)(w.D3D,{className:"!text-surface-900"}),className:"bg-white text-surface-500"},(0,n.__)("Move to","wpnakama"))),(0,s.createElement)(v.AM.Content,{className:"min-w-[140px] z-10 px-0 py-2",align:"end",side:"bottom"},de?.map((e=>(0,s.createElement)(v.$n,{variant:"link",className:"w-full rounded-none py-1 px-4 justify-start text-left text-sm font-normal text-surface-500 hover:bg-surface-100/50 hover:text-surface-600 no-underline",onClick:()=>async function(e){await Q("WPNakama","card",z,{board_id:I,phase_id:e}),await J(...te)||(Z(),o.Ay.error((0,n.__)("Someting went wrong while saving.","wpnakama")))}(e.phase_id),after:pe.phase_id===e.phase_id?(0,s.createElement)(w.Srz,{className:"text-wg-green-500 size-5 opacity-100"}):(0,s.createElement)(s.Fragment,null)},e.title))))))),(0,s.createElement)("div",{className:"w-fit"},(0,s.createElement)(v.tU.List,{className:"bg-white"},(0,s.createElement)(v.tU.Trigger,{before:(0,s.createElement)(w.GYj,null),after:Ee?(0,s.createElement)(v.Ex,{stroke:!0,size:"sm",shape:"pill"},Ne):(0,s.createElement)(v.Ex,{before:(0,s.createElement)(w.Nl1,{className:"animate-spin"}),stroke:!0,size:"sm",shape:"pill",className:"p-1"}),value:"todos"},(0,n.__)("Todos","wpnakama")),(0,s.createElement)(v.tU.Trigger,{before:(0,s.createElement)(w.Zes,null),value:"settings"},(0,n.__)("Settings","wpnakama")),(0,s.createElement)(v.m_,{content:(0,s.createElement)(v.$n,{variant:"link",className:"text-sm leading-5 text-white",onClick:()=>T("wpnakama_license")},(0,n.__)("Upcoming Pro Feature","wpnakama")),color:"primary"},(0,s.createElement)(v.tU.Trigger,{before:(0,s.createElement)(w.dsF,null),after:(0,s.createElement)($e.A,{license:W}),value:"message",disabled:!0},(0,n.__)("Activity Log","wpnakama")))))),(0,s.createElement)("div",null,(0,s.createElement)(v.tU.Content,{value:"todos",className:"flex flex-col gap-5 pt-5"},(0,s.createElement)("div",{className:"flex gap-28 justify-between"},(0,s.createElement)("div",{className:"flex-grow flex flex-col gap-8"},(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)("div",{className:"flex gap-4 justify-between items-center"},(0,s.createElement)("div",{className:"flex-shrink"},(0,s.createElement)("h2",{className:"text-base leading-6 font-semibold"},(0,n.__)("Notes","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-500"},(0,n.__)("Informative text will help others to understand the purpose.","wpnakama"))),(0,s.createElement)("div",{className:"flex-shrink flex flex-col gap-1"},(0,s.createElement)(v.$n,{variant:"primary",before:B.current&&ie?(0,s.createElement)(v.Rh,{type:"line",size:"xs",className:"text-primary-800"}):(0,s.createElement)(w.c11,null),size:"sm",onClick:async function(){B.current=!0,await J(...te)?o.Ay.success((0,n.__)("Successfully saved the notes.","wpnakama")):(Z(),o.Ay.error((0,n.__)("Someting went wrong while saving.","wpnakama"))),B.current=!1},disabled:!fe||pe?.notes===re.notes||ie},B.current&&ie?(0,n.__)("Saving notes","wpnakama"):(0,n.__)("Save notes","wpnakama")))),(0,s.createElement)(v.TM,{id:"task-notes",className:"max-h-64 focus:shadow-primary focus:outline-2 focus:outline-primary",defaultValue:re.notes,placeholder:(0,n.__)("Add notes here","wpnakama"),onChange:async function({target:{value:e}}){await Q("WPNakama","card",z,{board_id:I,notes:e})},disabled:!fe})),(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)("div",{className:"flex gap-4 justify-between items-center"},(0,s.createElement)("div",{className:"flex-shrink"},(0,s.createElement)("h2",{className:"text-base leading-6 font-semibold"},(0,n.__)("Todos","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-500"},(0,n.__)("Add a list of todos in your task.","wpnakama"))),(0,s.createElement)("div",null,(0,s.createElement)("div",{className:"flex-shrink flex gap-1"},(0,s.createElement)(v.m_,{content:(0,s.createElement)(v.$n,{variant:"link",className:"text-sm leading-5 text-white",onClick:()=>T("wpnakama_license")},(0,n.__)("Upcoming Pro Feature","wpnakama")),color:"primary"},(0,s.createElement)(v.$n,{variant:"secondary",before:(0,s.createElement)(w.dsF,{className:"text-secondary-500"}),after:(0,s.createElement)($e.A,{license:W}),size:"sm",onClick:e=>e.preventDefault(),className:"text-secondary-800 py-1 px-[8px] bg-wg-yellow-50 hover:bg-wg-yellow-50 focus:bg-wg-yellow-50 font-medium"},(0,n.__)("Save as template","wpnakama")))))),(0,s.createElement)(Re,{boardId:I,taskId:z,todos:xe,action:R,handleAction:A,isResolved:Ee})),(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)("div",{className:"flex gap-4 justify-between items-center"},(0,s.createElement)("div",{className:"flex-shrink"},(0,s.createElement)("h2",{className:"text-base leading-6 font-semibold"},(0,n.__)("Posts","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-500"},(0,n.__)("Add a list of posts in your task.","wpnakama"))),(0,s.createElement)("div",{className:"flex-shrink flex flex-col gap-1"},(0,s.createElement)(v.$n,{variant:"primary",before:q.current&&ie?(0,s.createElement)(v.Rh,{type:"line",size:"xs",className:"text-primary-800"}):(0,s.createElement)(w.c11,null),size:"sm",disabled:u()(pe?.post_ids?pe?.post_ids?.split(","):[],k)||ie||!le,className:"relative",onClick:async function(){q.current=!0;let e=new Set(pe?.post_ids?.split(",")),t=new Set(k);const a=Array.from(t.difference(e)),s=Array.from(e.difference(t)),r=await(ue?.filter((e=>e?.board_id===I&&e?.card_id===z))[0]);await Q("WPNakama","card",z,{board_id:I,post_ids:k.join(",")}),a?.forEach((e=>L(e,r?.id))),s?.forEach((e=>M(e,r?.id))),await J("WPNakama","card",z,{board_id:I})?o.Ay.success((0,n.__)("Successfully saved the posts.","wpnakama")):(Z(),o.Ay.error((0,n.__)("Someting went wrong while saving the posts in the task.","wpnakama"))),q.current=!1}},q.current&&ie?(0,n.__)("Saving posts","wpnakama"):(0,n.__)("Save posts","wpnakama")))),(0,s.createElement)("div",{className:"flex flex-col gap-4"},(0,s.createElement)(ze,{handleOpen:e=>P(e)}),(0,s.createElement)(De,null,k?.map((e=>(0,s.createElement)(je,{id:e,removeSelectedId:ke}))))),C&&(0,s.createElement)(Ie,{excludePosts:null!==(a=pe?.post_ids)&&void 0!==a?a:0,selectedPostIds:k,setSelectedPostIds:S,open:C,handleOpen:P}))),(0,s.createElement)(_,null))),(0,s.createElement)(v.tU.Content,{value:"settings"},(0,s.createElement)("div",{className:"mt-16"},(0,s.createElement)("div",{className:"flex justify-between gap-2"},(0,s.createElement)("div",null,(0,s.createElement)("h2",{className:"text-base leading-6 font-semibold"},(0,n.__)("Settings","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-5 text-surface-500"},(0,n.__)("Update task settings","wpnakama"))),(0,s.createElement)("div",null,(0,s.createElement)(v.$n,{variant:"primary",disabled:ie||oe,onClick:K((async function({title:e,description:t}){await Q("WPNakama","card",z,{board_id:I,title:e,description:t}),await J(...te)?(o.Ay.success((0,n.__)("Successfully saved the changes.","wpnakama")),V()):(Z(),o.Ay.error((0,n.__)("Something went wrong while saving the task, please refresh the page and try again.","wpnakama")))})),before:ie||oe?(0,s.createElement)(v.Rh,{type:"line",size:"xs",className:"text-primary-800"}):(0,s.createElement)(s.Fragment,null)},ie?(0,n.__)("Saving","wpnakama"):(0,n.__)("Save changes","wpnakama")))),ce&&(0,s.createElement)("div",{className:"m-auto mt-6 max-w-sm text-left"},(0,s.createElement)(v.Fc,{before:(0,s.createElement)(w.STI,null),color:"error",title:(0,n.__)("There was a problem with your submission","wpnakama"),variant:"expanded"},(0,s.createElement)("div",null,ce))),(0,s.createElement)("div",{className:"mt-5"},(0,s.createElement)("div",{className:"py-5 border-b-[1px] border-b-surface-200 flex gap-10 justify-between items-start"},(0,s.createElement)("div",{className:"w-2/5 flex-shrink-0"},(0,s.createElement)(v.JU,{className:"text-sm leading-5 font-medium",htmlFor:"task-title",required:!0},(0,n.__)("Task Title","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-4 text-surface-500 max-w-[290px]"},(0,n.__)("A self explanatory title is more searchable.","wpnakama"))),(0,s.createElement)("div",{className:"flex-grow flex flex-col gap-1 bg-surface-200/50 text-surface-500 rounded-lg"},(0,s.createElement)(v.pd,{required:!0,...G("title",{required:!0,minLength:3,maxLength:50}),id:"title",destructive:!!H.title,defaultValue:re?.title,placeholder:(0,n.__)("Task title","wpnakama"),disabled:!fe}),(0,s.createElement)("div",{className:"flex gap-3 px-1 pb-1 text-xs leading-tight"},(0,s.createElement)("div",{className:"flex-grow text-wg-red"},"required"===H.title?.type?(0,n.__)("Field is required.","wpnakama"):"minLength"===H.title?.type?(0,n.__)("At least 3 characters required.","wpnakama"):"maxLength"===H.title?.type?(0,n.__)("At most 50 characters allowed.","wpnakama"):""),(0,s.createElement)("div",{className:"flex-shrink "+("maxLength"===H.title?.type||"minLength"===H.title?.type||X?.title?.length<3||X?.title?.length>50?"text-wg-red":"text-surface-500")},(0,x.count)(null!==(m=X?.title)&&void 0!==m?m:re?.title,"characters_including_spaces")+" / 50")))),(0,s.createElement)("div",{ref:y,className:"py-5 border-b-[1px] border-b-surface-200 flex gap-10 justify-between items-start"},(0,s.createElement)("div",{className:"w-2/5 flex-shrink-0"},(0,s.createElement)(v.JU,{className:"text-sm leading-5 font-medium",htmlFor:"task-deadline"},(0,n.__)("Deadline","wpnakama")),(0,s.createElement)("div",{className:"text-sm leading-4 text-surface-500 max-w-[290px]"},(0,n.__)("Set the ending date for task.","wpnakama"))),(0,s.createElement)("div",{className:"flex flex-grow flex-col gap-4"},(0,s.createElement)(v.AM,null,(0,s.createElement)(v.AM.Trigger,{asChild:!0,className:"group/start"},(0,s.createElement)(v.$n,{id:"deadline-start",variant:"tertiary",className:"w-full justify-start rounded-lg text-sm font-normal px-4 py-2 shadow-wg-xs border-[1px] border-surface-200 bg-white group-data-[state=open]/start:outline group-data-[state=open]/start:outline-2 group-data-[state=open]/start:outline-primary-500",before:(0,s.createElement)(w.CTc,{className:"flex-shrink"}),after:(0,s.createElement)(w.ZLN,{className:"flex-shrink ml-auto"})},(0,s.createElement)("span",{className:"text-surface-500 text-left flex-grow"},we||(0,n.__)("Select date","wpnakama")))),(0,s.createElement)(v.AM.Content,{className:"w-96 z-10",align:"start",avoidCollisions:!0,collisionBoundary:"viewport",side:"top"},(0,s.createElement)(h.A,{selectedDate:ve,setSelectedDate:async function(e){await Q("WPNakama","card",z,{board_id:I,card_deadline_date:j(e)})}})))))))))))):(0,s.createElement)(E.A,null))}},8723:(e,t,a)=>{a.d(t,{P:()=>n});var s=a(2642);function n(e){return(0,s.a)(e).getDay()}},4051:(e,t,a)=>{a.d(t,{P:()=>r});var s=a(2642),n=a(5840);function r(e){const t=(0,s.a)(e),a=t.getFullYear(),r=t.getMonth(),l=(0,n.w)(e,0);return l.setFullYear(a,r+1,0),l.setHours(0,0,0,0),l.getDate()}},7941:(e,t,a)=>{a.d(t,{o:()=>u});var s=a(4848),n=a(1609),r=a(9473);const l=(0,n.createContext)(null);var i=a(5128),c=a(104);const o=e=>!e.isLayoutDirty&&e.willUpdate(!1);function d(){const e=new Set,t=new WeakMap,a=()=>e.forEach(o);return{add:s=>{e.add(s),t.set(s,s.addEventListener("willUpdate",a))},remove:s=>{e.delete(s);const n=t.get(s);n&&(n(),t.delete(s)),a()},dirty:a}}const m=e=>!0===e,u=({children:e,id:t,inherit:a=!0})=>{const o=(0,n.useContext)(r.L),u=(0,n.useContext)(l),[p,f]=function(){const e=function(){const e=(0,n.useRef)(!1);return(0,i.E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}(),[t,a]=(0,n.useState)(0),s=(0,n.useCallback)((()=>{e.current&&a(t+1)}),[t]);return[(0,n.useCallback)((()=>c.Gt.postRender(s)),[s]),t]}(),g=(0,n.useRef)(null),x=o.id||u;null===g.current&&((e=>m(!0===e)||"id"===e)(a)&&x&&(t=t?x+"-"+t:x),g.current={id:t,group:m(a)&&o.group||d()});const E=(0,n.useMemo)((()=>({...g.current,forceRender:p})),[f]);return(0,s.jsx)(r.L.Provider,{value:E,children:e})}}}]);